<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Заметки о фронтенде | Блог Виталия Зюзина</title>
  <meta name="author" content="Виталий Зюзин">
  
  

  <meta id="viewport" name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">

  

  <link href="/blog/img/favicon.png" rel="icon">
  <link rel="alternate" href="/blog/atom.xml" title="Заметки о фронтенде" type="application/atom+xml">
  <link rel="stylesheet" href="/blog/css/style.css" media="screen" type="text/css">
  <link href='https://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700&subset=latin,cyrillic' rel='stylesheet' type='text/css'>
  <link href='https://fonts.googleapis.com/css?family=Fira+Sans:400&subset=latin,cyrillic' rel='stylesheet' type='text/css'>
</head>


<body>

  <header><hgroup class="alignCenter">
  <h1><a class="title" href="/blog/">Заметки о фронтенде</a></h1>
  <p>
    Блог Виталия Зюзина
  </p>
  <p>
    <a href="/blog/">
      <img src="/blog/img/mech-heart.svg" alt="Логотип сайта" class="logo" width="80" height="104">
    </a>
  </p>
</hgroup>
</header>

  
  <article class="post article">

  <div class="article-top">
    
  
    <h2 class="article-title"><a href="/blog/2016/05/27/linting-css/"><span>Инспекция и причёсывание CSS</span></a></h2>
  



    <time class="entry-date published" datetime="2016-05-27T09:12:29.000Z">
      27.05.2016
    </time>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <h3 id="Предыстория"><a href="#Предыстория" class="headerlink" title="Предыстория"></a>Предыстория</h3><p>Однажды мы <a href="https://htmlacademy.ru/blog/62-codeguide-why-what-and-how" target="_blank" rel="external">решили</a> сделать в Академии <a href="https://htmlacademy.github.io/codeguide/" target="_blank" rel="external">кодгайд</a>. Кодгайд нам стал нужен для контроля над собственным кодом HTML/CSS и кодом учебных проектов студентов, которые у нас проходят интенсивный курс.</p>
<p>Сам по себе кодгайд — хорошая, но нестрогая штука. Команда ознакомилась с ним и взяла на вооружение: загрузили правила кодгайда в мозг, собственный и ученический код стали проверять методом «пристального взгляда».</p>
<p>У такого подхода есть очевидный минус — человеческий фактор. Можно запросто забыть или упустить что-то из правил. Чтобы контролировать собственный CSS-код, мы сделали конфигурацию для <a href="http://csscomb.com/" target="_blank" rel="external">CSSComb</a> и как-то справлялись автоматическим «причёсыванием» кода. Это конечно хорошо для производительности: написал CSS, запустил «расчёску», а она тебе сама поправит все недочёты и ошибки. Но совсем не подходит для целей обучения студентов или новичков в команде: человек будет полагаться на автоматическое «причёсывание», вместо того, чтобы самому научиться писать красивый единообразный код.</p>
<p>Поэтому я задумался об автоматизированной инспекции кода.</p>
<h3 id="Линтинг"><a href="#Линтинг" class="headerlink" title="Линтинг"></a>Линтинг</h3><p>Решений для инспекции CSS на самом деле оказалось не так много. Да и захотелось ещё проверять не только CSS, но и PostCSS, на котором у нас написан новый фронтенд.</p>
<p><a href="https://github.com/CSSLint/csslint" target="_blank" rel="external">CSSLint</a> немного устарел (последний релиз 15 августа 2013), и в нём не так много возможностей для тонкой конфигурации.</p>
<p><a href="https://github.com/brigade/scss-lint" target="_blank" rel="external">SCSS-Lint</a> подходит только для SCSS, кроме того требует Ruby, что более проблематично, чем Node.js (который уже есть в проектах).</p>
<p>А вот <a href="https://github.com/stylelint/stylelint" target="_blank" rel="external">Stylelint</a> отлично себя зарекомендовал:</p>
<ul>
<li>большие возможности тонкой настройки «из коробки»;</li>
<li>возможность кастомизации;</li>
<li>работает с PostCSS и поддерживаемыми им препроцессорными синтаксисами (CSS, SCSS, LESS…).</li>
</ul>
<p>Stylelint можно запускать из консоли, из Node.js, из таск-раннера или прямо в редакторе. Я сейчас использую его преимущественно из <a href="https://atom.io/" target="_blank" rel="external">Атома</a>.</p>
<p>Всё, что Stylelint умеет проверять «из коробки», можно условно разделить на группы:</p>
<ul>
<li>проверка форматирования кода;</li>
<li>«цензура» кода;</li>
<li>нахождение и предотвращение ошибок.</li>
</ul>
<p>Всего на момент написания статьи конфигурация Stylelint содержит около 150 правил. Все правила досконально описывать в этой статье не имеет смысла, так как они подробно разобраны в <a href="http://stylelint.io/user-guide/rules/" target="_blank" rel="external">документации</a>.</p>
<h4 id="Проверка-форматирования-кода"><a href="#Проверка-форматирования-кода" class="headerlink" title="Проверка форматирования кода"></a>Проверка форматирования кода</h4><p>Основное, что я жду от линтера — проверка соответствия кодгайду. То есть отступы, табуляция, единицы измерения, отбивка — вот это всё. Вот, к примеру, условно «правильный» код:</p>
<img src="/blog/2016/05/27/linting-css/valid-code.png" alt="Пример «правильного» кода" title="Пример «правильного» кода">
<p>Отступление от описанного в конфиге форматирования сигнализирует об ошибке. Проверяется много чего:</p>
<ul>
<li>написание цветов (<code>color-hex-case</code>, <code>color-hex-length</code>, <code>color-named</code>, <code>color-no-hex</code>);</li>
<li>написание шрифтов (<code>font-family-name-quotes</code>, <code>font-weight-notation</code>);</li>
<li>пробелы и табуляция (тут очень много правил: пробелы можно проверять до и после практически любых конструкций в CSS);</li>
<li>кавычки (<code>function-url-quotes</code>, <code>string-quotes</code>);</li>
<li>переносы в CSS-правилах и списках правил (тут тоже много правил относительно разных конструкций CSS);</li>
<li>регистр букв в селекторах, свойствах и значениях (<code>unit-case</code>, <code>value-keyword-case</code>,<code>property-case</code> и другие);</li>
<li>двоеточия (<code>selector-pseudo-element-colon-notation</code>);</li>
<li>и ещё много других моментов.</li>
</ul>
<p>Пример ошибок в коде:</p>
<img src="/blog/2016/05/27/linting-css/invalid-code.png" alt="Пример кода с неправильным форматированием" title="Пример кода с неправильным форматированием">
<p>Замечу, что Stylelint развивается быстрыми темпами, и за время написания статьи в него добавили ещё с десяток новых классных правил. Так что проверка соответствия стайлгайду — довольно детальная.</p>
<h4 id="«Цензура»-кода"><a href="#«Цензура»-кода" class="headerlink" title="«Цензура» кода"></a>«Цензура» кода</h4><p>Кроме базовой проверки стиля кода, Stylelint можно использовать для тотальной «цензуры». Есть возможность вполне безобидного запрета <code>!important</code> (<code>declaration-no-important</code>), стилизации по <code>#id</code> или имени тега (<code>selector-no-attribute</code>, <code>selector-no-id</code>). А можно ввести <del>танки</del> списки запрещённых или наоборот только разрешённых свойств (<code>property-blacklist</code>, <code>property-whitelist</code>), значений (<code>property-value-blacklist</code>, <code>property-value-whitelist</code>), CSS-функций (<code>function-blacklist</code>, <code>function-whitelist</code>), единиц измерения и даже содержимого комментариев.</p>
<p>Эта возможность хорошо подходит для формирования набора правил, по которым будет обучаться новичок. Например, в интенсивных курсах HTML Academy по вёрстке для начинающих мы запрещаем пользоваться <code>!important</code> и расставлять вендорные префиксы вручную:</p>
<img src="/blog/2016/05/27/linting-css/no-important.png" alt="Пример кода с использованием !important" title="Пример кода с использованием !important">
<img src="/blog/2016/05/27/linting-css/no-prefix.png" alt="Пример кода с вендорными префиксами" title="Пример кода с вендорными префиксами">
<p>Проверку кода можно проводить перед пушем в учебный репозиторий.</p>
<h4 id="Нахождение-и-предотвращение-ошибок"><a href="#Нахождение-и-предотвращение-ошибок" class="headerlink" title="Нахождение и предотвращение ошибок"></a>Нахождение и предотвращение ошибок</h4><p>Ну хорошо. Если всё вышеизложенное можно отнести к стилю кода, то возможности Stylelint по нахождению ошибок и потенциально «опасных» мест в ваших стилях — приятный бонус линтера.</p>
<p>Опишу несколько правил Stylelint, которые находят и предотвращают ошибки.</p>
<p>Правило <code>color-no-invalid-hex</code> находит недопустимые символы в шестнадцатеричном представлении цвета:</p>
<img src="/blog/2016/05/27/linting-css/invalid-hex.png" alt="Пример кода с неправильным значением цвета" title="Пример кода с неправильным значением цвета">
<p>Правило <code>no-duplicate-selectors</code> найдёт одинаковые селекторы:</p>
<img src="/blog/2016/05/27/linting-css/no-duplicates.png" alt="Пример кода с дубликатом селектора" title="Пример кода с дубликатом селектора">
<p>Правило <code>declaration-block-no-shorthand-property-overrides</code> предотвратит бессмысленное переопределение свойств внутри правил:</p>
<img src="/blog/2016/05/27/linting-css/no-prop-override.png" alt="Пример кода с бессмысленным переопределением свойства" title="Пример кода с бессмысленным переопределением свойства">
<p>Правило <code>no-descending-specificity</code> обнаружит бессмысленное переопределение правил более специфичными селекторами.</p>
<img src="/blog/2016/05/27/linting-css/no-descending-specificity.png" alt="Пример кода с бессмысленным переопределением правила" title="Пример кода с бессмысленным переопределением правила">
<p>Правило <code>no-indistinguishable-colors</code> предупредит о похожих цветах, заданных в CSS:</p>
<img src="/blog/2016/05/27/linting-css/no-indistinguishable-colors.png" alt="Пример кода с похожими цветами" title="Пример кода с похожими цветами">
<p>На самом деле таких правил-помощников довольно много. Проще изучить их в <a href="http://stylelint.io/user-guide/rules/" target="_blank" rel="external">документации</a>, так как быстро появляются всё новые правила.</p>
<h3 id="«Причёсывание»"><a href="#«Причёсывание»" class="headerlink" title="«Причёсывание»"></a>«Причёсывание»</h3><p>В некоторых случаях хочется или нужно «причесать» стили автоматически.</p>
<p>Как я говорил раньше, мы пользовались CSSComb для причесывания стилей. Но, к сожалению, бывало, он глючно работал с нестандартным синтаксисом вроде Sass, вовсе не работал с PostCSS и в целом приостановился в развитии.</p>
<p>Так что пришлось искать ему замену. И приятной находкой оказался <a href="https://github.com/morishitter/stylefmt" target="_blank" rel="external">stylefmt</a>, который работает с понимаемыми PostCSS синтаксисами и принимает правила конфигурации Stylelint.</p>
<p>Но не всё так чудесно, как хотелось бы. Так как stylefmt — совсем свежий проект, на момент написания статьи он поддерживает далеко не все правила Stylelint:</p>
<ul>
<li>переносы и пробелы перед и после открывающих скобок (<code>block-opening-brace-newline-after</code>, <code>block-opening-brace-newline-before</code>, <code>block-opening-brace-space-after</code>, <code>block-opening-brace-space-before</code>);</li>
<li>отступы (<code>indentation</code>);</li>
<li>пробелы до и после комбинаторов (<code>selector-combinator-space-after</code>, <code>selector-combinator-space-before</code>);</li>
<li>переносы и пробелы перед и после запятых в селекторах (<code>selector-list-comma-newline-after</code>, <code>selector-list-comma-newline-before</code>, <code>selector-list-comma-space-after</code>, <code>selector-list-comma-space-before</code>).</li>
</ul>
<p>Остальное по-прежнему придётся править руками. Или можно <a href="https://github.com/morishitter/stylefmt/issues" target="_blank" rel="external">помочь сообществу</a> и запилить недостающую функциональность.</p>
<h3 id="Сортировка-свойств-в-CSS-правилах"><a href="#Сортировка-свойств-в-CSS-правилах" class="headerlink" title="Сортировка свойств в CSS-правилах"></a>Сортировка свойств в CSS-правилах</h3><p>Чем ещё был хорош CSSComb, так это автоматическая сортировка свойств внутри CSS-правил.</p>
<p>Вообще-то Stylelint умеет проверять очерёдность свойств в правилах, но линтить это нет особого смысла, так как человеку тяжело да и не нужно запоминать точный порядок всех возможных свойств.</p>
<p>А stylefmt пока что не умеет автоматически наводить порядок в очерёдности свойств.</p>
<p>Что делать?</p>
<p>На помощь пришёл замечательный инструмент <a href="https://github.com/hudochenkov/postcss-sorting" target="_blank" rel="external">PostCSS Sorting</a>. Он умеет сортировать свойства в правилах синтаксисов, которые понимает PostCSS. Этот инструмент вдохновлён CSSComb, и у него аналогичный конфиг. Запускать его можно тоже таск-раннером или из редактора.</p>
<p>Логично предположить, что рано или поздно stylefmt и PostCSS Sorting станут каким-то образом связаны, и их можно будет использовать как один инструмент.</p>
<h3 id="Итого"><a href="#Итого" class="headerlink" title="Итого"></a>Итого</h3><p>Я составил и обновляю по мере необходимости конфигурации <a href="https://github.com/htmlacademy/codeguide/blob/master/.stylelintrc" target="_blank" rel="external">для Stylelint</a> и <a href="https://github.com/htmlacademy/codeguide/blob/master/.postcss-sorting.json" target="_blank" rel="external">для PostCSS Sorting</a>. Их можно просто использовать или переопределить.</p>
<p>Держите свой код в порядке!</p>

      
    </div>
    <footer class="article-footer">
        <div class="article-meta">
          
  

  <span class="post-tags">
    <a href="/blog/tags/workflow/">workflow</a>, <a href="/blog/tags/CSS/">CSS</a>, <a href="/blog/tags/linting/">linting</a>
  </span>



        </div>
    </footer>
  </div>
</article>


  <article class="post article">

  <div class="article-top">
    
  
    <h2 class="article-title"><a href="/blog/2016/05/07/dump-talk/"><span>Баги в браузерах. Кто виноват и что делать?</span></a></h2>
  



    <time class="entry-date published" datetime="2016-05-06T22:22:45.000Z">
      07.05.2016
    </time>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <p>В апреле ездил в Екатеринбург на <a href="http://dump-conf.ru/" target="_blank" rel="external">ДАМП</a>. Рассказывал про баги в браузерах. Вот и видео выступления с конференции подоспело.</p>
<div class="video-container"><iframe src="//www.youtube.com/embed/K4cQH85bntQ" frameborder="0" allowfullscreen></iframe></div>
<p><a href="https://juwain.github.io/blog/presentation/browser-bugs/">Презентация</a> прилагается.</p>

      
    </div>
    <footer class="article-footer">
        <div class="article-meta">
          
  

  <span class="post-tags">
    <a href="/blog/tags/CSS/">CSS</a>, <a href="/blog/tags/доклады/">доклады</a>
  </span>



        </div>
    </footer>
  </div>
</article>


  <article class="post article">

  <div class="article-top">
    
  
    <h2 class="article-title"><a href="/blog/2015/09/03/pomodoro-technique/"><span>Техника помидора</span></a></h2>
  



    <time class="entry-date published" datetime="2015-09-03T06:00:00.000Z">
      03.09.2015
    </time>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <p>На прошедшей неделе я попробовал управлять своим рабочим временем нестихийным образом.</p>
<p>Накануне в ленте упомянули про технику <a href="https://ru.wikipedia.org/wiki/%D0%9F%D0%BE%D0%BC%D0%B8%D0%B4%D0%BE%D1%80_%28%D0%BC%D0%B5%D1%82%D0%BE%D0%B4%29" target="_blank" rel="external">Pomodoro</a>. Я решил провести эту рабочую неделю с помидорной техникой и посмотреть, что из этого получится.</p>
<h3 id="Вкратце"><a href="#Вкратце" class="headerlink" title="Вкратце"></a>Вкратце</h3><p>Техника работает. Не отвлекаясь по мелочам всю неделю работал более эффективно. Сделал боьше, чем обычно, за то же время. Рекомендую!</p>
<h3 id="Что-ещё-за-помидоры"><a href="#Что-ещё-за-помидоры" class="headerlink" title="Что ещё за помидоры"></a>Что ещё за помидоры</h3><p>Техника несложная: рабочее время делится на небольшие спринты с короткими перерывами. Во время спринта надо выключить все уведомления и не отвлекаться на раздражители: чаты, контактик, твиттер и прочие уведомляшки.</p>
<p>Спринты идут следующим образом:</p>
<ol>
<li>25 минут работы;</li>
<li>5 минут перерыв;</li>
<li>25 минут работы;</li>
<li>5 минут перерыв;</li>
<li>25 минут работы;</li>
<li>5 минут перерыв;</li>
<li>25 минут работы;</li>
<li>15 минут перерыв.</li>
</ol>
<p>Этот цикл затем повторяется по кругу. В перерывах важно отвлечься от текущего дела, а лучше вообще встать из-за компа, походить, размяться, попить водички, подумать о чём-нибудь помимо текущей задачи.</p>
<p>Это всё теория, а …</p>
<h3 id="На-практике"><a href="#На-практике" class="headerlink" title="На практике"></a>На практике</h3><p>… получается следующим образом. В начале рабочего дня я начинал разбирать разные мелкие задачи и дела, не включая счётчик помидоров.  С прошлого дня накапливаются незавершённые мелочи, рандомные коммуникации, идеи, которые надо быстро разрешить и проверить. Этот предварительный этап у меня длился от 1 до 2 часов. Дальше разбирал задачи на сегодня из общего туду-листа.</p>
<p>Затем я включал счётчик, выключал уведомления и начинал работать уже по помидорам. До большого перерыва получалось сделать от 4 до 6 помидоров.</p>
<p>В большой перерыв я шёл на обед, который занимает около часа.</p>
<p>После обеда получалось сделать от 7 до 12 помидоров.</p>
<p>Итого примерно так:</p>
<ol>
<li>1−2 часа без помидоров, рандом, подготовка;</li>
<li>2−3 часа работы;</li>
<li>1 час большой перерыв;</li>
<li>3.5−6 часов работы.</li>
</ol>
<p>Итого, в среднем за прошедшую неделю получалось от 5 до 8 часов «чистой» работы в день. И это действительно эффективная работа, когда ты полностью погружаешься и входишь в состояние потока. Плюс 1−2 часа на предварительный рандом и подготовку.</p>
<h3 id="Инструменты"><a href="#Инструменты" class="headerlink" title="Инструменты"></a>Инструменты</h3><p>Я использовал бесплатный <a href="https://itunes.apple.com/ru/app/pomodoro-one/id907364780" target="_blank" rel="external">Pomodoro One</a> для мака. Это приложение простое и понятное, выдаёт окошко на передний план и звук, когда заканчивается или начинается следующий период. Ещё рекомендовали веб-версию <a href="http://tomato-timer.com" target="_blank" rel="external">Tomato Timer</a> и платное приложение для мака <a href="https://itunes.apple.com/us/app/tadam/id531349534" target="_blank" rel="external">Tadam</a>, но я не пробовал.</p>
<h3 id="Итог"><a href="#Итог" class="headerlink" title="Итог"></a>Итог</h3><p>Если у вас есть проблемы с решением больших и сложных, множества мелких или рутинных задач, попробуйте помидорную технику. С ней увеличивается продуктивность, а главное — после работы остаются силы на другие дела.</p>

      
    </div>
    <footer class="article-footer">
        <div class="article-meta">
          
  

  <span class="post-tags">
    <a href="/blog/tags/управление-временем/">управление временем</a>
  </span>



        </div>
    </footer>
  </div>
</article>


  <article class="post article">

  <div class="article-top">
    
  
    <h2 class="article-title"><a href="/blog/2015/07/15/design-elements-button/"><span>Кнопка</span></a></h2>
  



    <time class="entry-date published" datetime="2015-07-15T13:54:28.000Z">
      15.07.2015
    </time>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <p>Потихоньку реализую элементы будущего дизайна HTML Academy. Вот, к примеру, кнопка с эффектом по наведению или фокусу.</p>
<p></p><p data-height="325" data-theme-id="9939" data-slug-hash="MwXvYv" data-default-tab="result" data-user="juwain" class="codepen">See the Pen <a href="http://codepen.io/juwain/pen/MwXvYv/" target="_blank" rel="external">Эффект кнопки</a> by juwain (<a href="http://codepen.io/juwain" target="_blank" rel="external">@juwain</a>) on <a href="http://codepen.io" target="_blank" rel="external">CodePen</a>.</p><p></p>
<script async src="//assets.codepen.io/assets/embed/ei.js"></script>

      
    </div>
    <footer class="article-footer">
        <div class="article-meta">
          
  

  <span class="post-tags">
    <a href="/blog/tags/CSS/">CSS</a>
  </span>



        </div>
    </footer>
  </div>
</article>


  <article class="post article">

  <div class="article-top">
    
  
    <h2 class="article-title"><a href="/blog/2015/07/14/background-offsets/"><span>Отступы фонового изображения</span></a></h2>
  



    <time class="entry-date published" datetime="2015-07-14T14:00:05.000Z">
      14.07.2015
    </time>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <p>Простой способ добавить отступы фоновому изображению: <br><code>background-position: center</code> и <code>background-size: calc(100% - Npx)</code>.</p>
<p></p><p data-height="380" data-theme-id="9939" data-slug-hash="zGawGV" data-default-tab="result" data-user="juwain" class="codepen">See the Pen <a href="http://codepen.io/juwain/pen/zGawGV/" target="_blank" rel="external">zGawGV</a> by juwain (<a href="http://codepen.io/juwain" target="_blank" rel="external">@juwain</a>) on <a href="http://codepen.io" target="_blank" rel="external">CodePen</a>.</p><p></p>
<script async src="//assets.codepen.io/assets/embed/ei.js"></script>

      
    </div>
    <footer class="article-footer">
        <div class="article-meta">
          
  

  <span class="post-tags">
    <a href="/blog/tags/CSS/">CSS</a>
  </span>



        </div>
    </footer>
  </div>
</article>



<nav class="pagination">
  
  
  <a href="/blog/page/2/" class="pagination-next">Вперёд</a>
  
</nav>


  <footer role="contentinfo"><p class="site-info">
  
  &copy; 2017 Виталий Зюзин
  
</p>
</footer>

  
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-40607156-3', 'auto');
    ga('send', 'pageview');

</script>


</body>
</html>
